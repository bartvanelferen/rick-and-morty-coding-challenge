{"ast":null,"code":"import React,{useState,useEffect}from'react';import{API_URL,DEFAULT_PAGE_INFO,ENDPOINTS}from'../../../global/Constants';import axios from'axios';import CharacterCard from\"../CharacterCard/CharacterCard\";import CharacterListPlaceholders from\"./CharacterListPlaceholders\";import'../../../assets/styles/components/CharacterList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CharacterList=()=>{let filterTimeout;const defaultCount=6;const noResults='No results, try another search';const introSection=document.querySelector('.intro-section__title');const[filterName,setFilterName]=useState('');const[characters,setCharacters]=useState([]);const[pageInfo,setPageInfo]=useState(DEFAULT_PAGE_INFO);const[currentPage,setCurrentPage]=useState(1);const[loading,setLoading]=useState(false);const[error,setError]=useState(false);const scrollToTop=top=>{window.scrollTo({top:top,behavior:'smooth'});};const searchHandler=query=>{clearTimeout(filterTimeout);if(!query){setCurrentPage(1);return setFilterName('');}filterTimeout=setTimeout(()=>{setFilterName(query.toLowerCase());setCurrentPage(1);},500);};const pageHandler=direction=>{if(direction==='prev'){setCurrentPage(currentPage-1);if(introSection instanceof HTMLElement){scrollToTop(introSection.offsetHeight);}}else if(direction==='next'){setCurrentPage(currentPage+1);if(introSection instanceof HTMLElement){scrollToTop(introSection.offsetHeight);}}};const fetchCharacterData=async()=>{try{setError(false);const response=await axios.get(\"\".concat(API_URL).concat(ENDPOINTS.characters,\"?name=\").concat(filterName,\"&page=\").concat(currentPage));setCharacters(response.data.results);setPageInfo(response.data.info);setLoading(false);}catch(error){setError(true);setLoading(false);}};useEffect(()=>{setLoading(true);// Wrap with timeout because API is too fast, so user experience may be impacted\nsetTimeout(()=>{void fetchCharacterData();},1000);},[filterName,currentPage]);return/*#__PURE__*/_jsxs(\"div\",{className:\"characters-list-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"characters-list__search-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"characters-list__search-input\",type:\"search\",placeholder:\"Search a character\",onChange:event=>searchHandler(event.target.value)})}),!error?/*#__PURE__*/_jsx(\"div\",{className:\"characters-list\",children:loading?/*#__PURE__*/_jsx(CharacterListPlaceholders,{placeholderCount:defaultCount}):/*#__PURE__*/_jsx(_Fragment,{children:characters.map(character=>/*#__PURE__*/_jsx(CharacterCard,{id:character.id,name:character.name,image:character.image,status:character.status},character.id))})}):/*#__PURE__*/_jsx(\"p\",{children:noResults}),/*#__PURE__*/_jsxs(\"div\",{className:\"characters-list__navigation\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(currentPage,\" / \").concat(pageInfo.pages)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"navigation-button\",disabled:currentPage===1,onClick:()=>pageHandler('prev'),children:\"Previous Page\"}),/*#__PURE__*/_jsx(\"button\",{className:\"navigation-button\",disabled:currentPage===pageInfo.pages,onClick:()=>pageHandler('next'),children:\"Next Page\"})]})]})]});};export default CharacterList;","map":{"version":3,"names":["React","useState","useEffect","API_URL","DEFAULT_PAGE_INFO","ENDPOINTS","axios","CharacterCard","CharacterListPlaceholders","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CharacterList","filterTimeout","defaultCount","noResults","introSection","document","querySelector","filterName","setFilterName","characters","setCharacters","pageInfo","setPageInfo","currentPage","setCurrentPage","loading","setLoading","error","setError","scrollToTop","top","window","scrollTo","behavior","searchHandler","query","clearTimeout","setTimeout","toLowerCase","pageHandler","direction","HTMLElement","offsetHeight","fetchCharacterData","response","get","concat","data","results","info","className","children","type","placeholder","onChange","event","target","value","placeholderCount","map","character","id","name","image","status","pages","disabled","onClick"],"sources":["/Users/bartvanelferen/Desktop/Projects/rick-and-morty-app/src/components/Charaters/CharacterList/CharacterList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {API_URL, DEFAULT_PAGE_INFO, ENDPOINTS} from '../../../global/Constants';\nimport {Character} from '../../../global/Interfaces';\nimport axios from 'axios';\nimport CharacterCard from \"../CharacterCard/CharacterCard\";\nimport CharacterListPlaceholders from \"./CharacterListPlaceholders\";\nimport '../../../assets/styles/components/CharacterList.css';\n\nexport interface PageInfo {\n    count: number;\n    pages: number;\n    next: string | null\n    prev: string | null\n}\n\nconst CharacterList = () => {\n    let filterTimeout: NodeJS.Timeout;\n    const defaultCount: number = 6;\n    const noResults: string = 'No results, try another search';\n    const introSection = document.querySelector<HTMLElement>('.intro-section__title');\n\n    const [filterName, setFilterName] = useState('');\n    const [characters, setCharacters] = useState<Character[]>([]);\n    const [pageInfo, setPageInfo] = useState<PageInfo>(DEFAULT_PAGE_INFO);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n\n    const scrollToTop = (top: number) => {\n        window.scrollTo({ top: top, behavior: 'smooth' });\n    };\n\n    const searchHandler = (query: string) => {\n        clearTimeout(filterTimeout)\n        if (!query) {\n            setCurrentPage(1);\n            return setFilterName('');\n        }\n\n        filterTimeout = setTimeout((): void => {\n            setFilterName(query.toLowerCase());\n            setCurrentPage(1);\n        }, 500);\n    };\n\n    const pageHandler = (direction: string) => {\n        if (direction === 'prev') {\n            setCurrentPage(currentPage - 1);\n            if (introSection instanceof HTMLElement) {\n                scrollToTop(introSection.offsetHeight);\n            }\n        } else if (direction === 'next') {\n            setCurrentPage(currentPage + 1);\n            if (introSection instanceof HTMLElement) {\n                scrollToTop(introSection.offsetHeight);\n            }\n        }\n    }\n\n    const fetchCharacterData = async (): Promise<void> => {\n        try {\n            setError(false);\n            const response = await axios.get(`${API_URL}${ENDPOINTS.characters}?name=${filterName}&page=${currentPage}`);\n            setCharacters(response.data.results);\n            setPageInfo(response.data.info);\n            setLoading(false);\n        } catch (error) {\n            setError(true);\n            setLoading(false);\n        }\n    };\n\n    useEffect((): void => {\n        setLoading(true);\n        // Wrap with timeout because API is too fast, so user experience may be impacted\n        setTimeout((): void => {\n            void fetchCharacterData();\n        }, 1000);\n    }, [filterName, currentPage]);\n\n    return (\n        <div className=\"characters-list-container\">\n            <div className=\"characters-list__search-wrapper\">\n                <input\n                    className=\"characters-list__search-input\"\n                    type=\"search\"\n                    placeholder=\"Search a character\"\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => searchHandler(event.target.value)}\n                />\n            </div>\n            {!error ? (\n                <div className=\"characters-list\">\n                    {loading ? (\n                        <CharacterListPlaceholders\n                            placeholderCount={defaultCount}\n                        />\n                    ) : (\n                        <>\n                            {characters.map((character: Character) => (\n                                <CharacterCard\n                                    key={character.id}\n                                    id={character.id}\n                                    name={character.name}\n                                    image={character.image}\n                                    status={character.status}\n                                />\n                            ))}\n                        </>\n                    )}\n                </div>\n            ) : (\n                <p>{noResults}</p>\n            )}\n            <div className=\"characters-list__navigation\">\n                <span>{`${currentPage} / ${pageInfo.pages}`}</span>\n                <div>\n                    <button\n                        className=\"navigation-button\"\n                        disabled={currentPage === 1}\n                        onClick={() => pageHandler('prev')}\n                    >\n                        Previous Page\n                    </button>\n                    <button\n                        className=\"navigation-button\"\n                        disabled={currentPage === pageInfo.pages}\n                        onClick={() => pageHandler('next')}\n                    >\n                        Next Page\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CharacterList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}